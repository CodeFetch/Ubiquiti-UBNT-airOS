Index: miniupnpd-1.9.20151118/miniupnpd.c
===================================================================
--- miniupnpd-1.9.20151118.orig/miniupnpd.c
+++ miniupnpd-1.9.20151118/miniupnpd.c
@@ -1048,6 +1048,7 @@ init(int argc, char * * argv, struct run
 	int i;
 	int pid;
 	int debug_flag = 0;
+	int foreground_flag = 0;
 	int openlog_option;
 	struct sigaction sa;
 	/*const char * logfilename = 0;*/
@@ -1450,6 +1451,9 @@ init(int argc, char * * argv, struct run
 		case 'd':
 			debug_flag = 1;
 			break;
+		case 'k':
+			foreground_flag = 1;
+			break;
 		case 'w':
 			if(i+1 < argc)
 				presurl = argv[++i];
@@ -1568,7 +1572,7 @@ init(int argc, char * * argv, struct run
 		goto print_usage;
 	}
 
-	if(debug_flag)
+	if(foreground_flag)
 	{
 		pid = getpid();
 	}
@@ -1585,7 +1589,7 @@ init(int argc, char * * argv, struct run
 	}
 
 	openlog_option = LOG_PID;
-	if(debug_flag)
+	if(foreground_flag)
 	{
 		openlog_option |= LOG_PERROR;	/* also log on stderr */
 	}
@@ -1698,7 +1702,7 @@ print_usage:
 #ifdef ENABLE_HTTPS
 			" [-H https_port]"
 #endif
-			" [-p port] [-d]"
+			" [-p port] [-d] [-k]"
 #if defined(USE_PF) || defined(USE_IPF)
 			" [-L]"
 #endif
@@ -1725,7 +1729,8 @@ print_usage:
 	        "\tNotify interval is in seconds. Default is 30 seconds.\n"
 			"\tDefault pid file is '%s'.\n"
 			"\tDefault config file is '%s'.\n"
-			"\tWith -d miniupnpd will run as a standard program.\n"
+			"\tWith -k miniupnpd will run as a standard program.\n"
+			"\t-d more debug.\n"
 #if defined(USE_PF) || defined(USE_IPF)
 			"\t-L sets packet log in pf and ipf on.\n"
 #endif
